<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–µ Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script> <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Telegram WebApp API -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #222222);
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        button {
            background-color: var(--tg-theme-button-color, #50a8eb);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
    </style>
</head>
<body>
    <h1>–ü—Ä–∏–≤–µ—Ç, <span id="user-name">–¥—Ä—É–≥</span>! üëã</h1>
    <p>–≠—Ç–æ –º–æ–µ –ø–µ—Ä–≤–æ–µ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram.</p>
    <button onclick="sendData()">–ù–∞–∂–º–∏ –º–µ–Ω—è!</button>
    <p>–°—Ç–∞—Ç—É—Å: <span id="status">–ù–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</span></p>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebApp
        let tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.enableClosingConfirmation(); // –°–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
        let user = tg.initDataUnsafe?.user;
        if (user) {
            document.getElementById('user-name').textContent = `${user.first_name}`;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞—Ç–Ω–æ –≤ –±–æ—Ç
        function sendData() {
            tg.sendData(JSON.stringify({action: "button_clicked", user_id: user?.id}));
            document.getElementById('status').textContent = "–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!";
            // tg.close(); // –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
        }

        // –í–µ—à–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –≤ Telegram
        tg.onEvent('backButtonClicked', () => {
            tg.showPopup({
                title: "–í—ã—Ö–æ–¥?",
                message: "–¢–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?",
                buttons: [{type: 'ok', id: 'close'}, {type: 'cancel', id: 'cancel'}]
            });
        });
    </script>
</body>
</html>